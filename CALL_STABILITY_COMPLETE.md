# ‚úÖ –°–¢–ê–ë–ò–õ–¨–ù–û–°–¢–¨ –ó–í–û–ù–ö–û–í –ò –°–¢–ê–¢–£–° "–ó–ê–ù–Ø–¢–û" (31.01.2026 19:00)

## üéØ –ó–ê–î–ê–ß–ê:

1. **–°—Ç–∞–±–∏–ª—å–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ**: –ó–≤–æ–Ω–æ–∫ –¥–æ–ª–∂–µ–Ω –¥–æ—Ö–æ–¥–∏—Ç—å –¥–æ –ø–æ–ª—É—á–∞—Ç–µ–ª—è, –µ—Å–ª–∏ –æ–Ω –æ–Ω–ª–∞–π–Ω
2. **–°—Ç–∞—Ç—É—Å "–ó–∞–Ω—è—Ç–æ"**: –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞ –∑–≤–æ–Ω–∫–µ, –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä—É –¥–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å—Å—è, —á—Ç–æ –∞–±–æ–Ω–µ–Ω—Ç –∑–∞–Ω—è—Ç

## ‚úÖ –ß–¢–û –†–ï–ê–õ–ò–ó–û–í–ê–ù–û:

### 1. Backend (`backend/src/websocket/websocket.gateway.ts`):

#### –î–æ–±–∞–≤–ª–µ–Ω–∞ Map –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞ –∑–≤–æ–Ω–∫–µ:
```typescript
/** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ —Å–µ–π—á–∞—Å –Ω–∞ –∑–≤–æ–Ω–∫–µ: userId -> chatId */
private usersInCall = new Map<string, string>();
```

#### –ü—Ä–∏ –∏–Ω–∏—Ü–∏–∞—Ü–∏–∏ –∑–≤–æ–Ω–∫–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è:
- ‚úÖ –ü–æ–ª—É—á–∞—Ç–µ–ª—å **–æ–Ω–ª–∞–π–Ω** (–µ—Å—Ç—å WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ)
- ‚úÖ –ü–æ–ª—É—á–∞—Ç–µ–ª—å **–Ω–µ –∑–∞–Ω—è—Ç** –¥—Ä—É–≥–∏–º –∑–≤–æ–Ω–∫–æ–º
- ‚úÖ –ò–Ω–∏—Ü–∏–∞—Ç–æ—Ä **–Ω–µ –∑–∞–Ω—è—Ç** –¥—Ä—É–≥–∏–º –∑–≤–æ–Ω–∫–æ–º

```typescript
// –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –ø–æ–ª—É—á–∞—Ç–µ–ª—å –Ω–µ –∑–∞–Ω—è—Ç –¥—Ä—É–≥–∏–º –∑–≤–æ–Ω–∫–æ–º
if (this.usersInCall.has(receiver.userId)) {
  const busyChatId = this.usersInCall.get(receiver.userId);
  client.emit('call:busy', {
    message: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–Ω—è—Ç –¥—Ä—É–≥–∏–º –∑–≤–æ–Ω–∫–æ–º',
    chatId: dto.chatId,
    busyChatId,
  });
  return;
}
```

#### –ü—Ä–∏ –æ—Ç–≤–µ—Ç–µ –Ω–∞ –∑–≤–æ–Ω–æ–∫ –æ–±–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ usersInCall:
```typescript
// –û—Ç–º–µ—Ç–∏—Ç—å –æ–±–æ–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∫–∞–∫ "–Ω–∞ –∑–≤–æ–Ω–∫–µ"
this.usersInCall.set(callInfo.callerId, dto.chatId);
this.usersInCall.set(callInfo.receiverId, dto.chatId);
```

#### –ü—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∑–≤–æ–Ω–∫–∞ (end/reject) –æ–±–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —É–¥–∞–ª—è—é—Ç—Å—è:
```typescript
// –£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ —Å—Ç–∞—Ç—É—Å–∞ "–Ω–∞ –∑–≤–æ–Ω–∫–µ"
this.usersInCall.delete(callInfo.callerId);
this.usersInCall.delete(callInfo.receiverId);
```

#### –ü—Ä–∏ —Ä–∞–∑—Ä—ã–≤–µ WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è:
- ‚úÖ –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±—ã–ª –Ω–∞ –∑–≤–æ–Ω–∫–µ - —É–≤–µ–¥–æ–º–ª—è–µ—Ç—Å—è —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫
- ‚úÖ –ó–≤–æ–Ω–æ–∫ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ –û—á–∏—â–∞—é—Ç—Å—è –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –æ –∑–≤–æ–Ω–∫–µ

```typescript
// –ü—Ä–æ–≤–µ—Ä–∫–∞, –±—ã–ª –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞ –∑–≤–æ–Ω–∫–µ
const chatId = this.usersInCall.get(userId);
if (chatId) {
  const callInfo = this.activeCalls.get(chatId);
  if (callInfo) {
    // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞ –æ —Ä–∞–∑—Ä—ã–≤–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
    if (otherSocketId) {
      this.server.to(otherSocketId).emit('call:end', {
        chatId,
        reason: 'connection_lost',
      });
    }
    // –û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –æ –∑–≤–æ–Ω–∫–µ
    this.activeCalls.delete(chatId);
    this.usersInCall.delete(callInfo.callerId);
    this.usersInCall.delete(callInfo.receiverId);
  }
}
```

---

### 2. Frontend (`frontend-web/src/services/webrtc.service.ts`):

#### –î–æ–±–∞–≤–ª–µ–Ω—ã –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –Ω–æ–≤—ã—Ö —Å–æ–±—ã—Ç–∏–π:

```typescript
// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ "–∑–∞–Ω—è—Ç–æ"
this._handlerBusy = (data: { chatId: string; message: string }) => {
  if (data.chatId === this.chatId) {
    webrtcLogService.add('call:busy - ' + data.message);
    this.endCall();
    this.onCallBusyCallback?.(data);
  }
};
this.socket.on('call:busy', this._handlerBusy);

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫ –∑–≤–æ–Ω–∫–∞
this._handlerError = (data: { message: string }) => {
  webrtcLogService.add('call:error - ' + data.message);
  this.endCall();
  this.onCallErrorCallback?.(data.message);
};
this.socket.on('call:error', this._handlerError);
```

#### –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—É–±–ª–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è –ø–æ–¥–ø–∏—Å–∫–∏:
```typescript
onCallBusy(callback: (data: any) => void) {
  this.onCallBusyCallback = callback;
}

onCallError(callback: (message: string) => void) {
  this.onCallErrorCallback = callback;
}
```

---

### 3. UI (`frontend-web/src/components/VideoCall.tsx`):

#### –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ:

```typescript
webrtc.onCallBusy((data: any) => {
  soundService.stopRingtone();
  setIsConnecting(false);
  alert(data.message || '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–Ω—è—Ç –¥—Ä—É–≥–∏–º –∑–≤–æ–Ω–∫–æ–º');
  onEnd();
});

webrtc.onCallError((message: string) => {
  soundService.stopRingtone();
  setIsConnecting(false);
  alert(message || '–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–≤–µ—Ä—à–µ–Ω–∏–∏ –∑–≤–æ–Ω–∫–∞');
  onEnd();
});
```

---

## üîÑ –°–¶–ï–ù–ê–†–ò–ò –†–ê–ë–û–¢–´:

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –£—Å–ø–µ—à–Ω—ã–π –∑–≤–æ–Ω–æ–∫
1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å A** –∑–≤–æ–Ω–∏—Ç **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é B**
2. **Backend** –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
   - ‚úÖ B –æ–Ω–ª–∞–π–Ω
   - ‚úÖ B –Ω–µ –∑–∞–Ω—è—Ç
   - ‚úÖ A –Ω–µ –∑–∞–Ω—è—Ç
3. **Backend** –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `call:offer` ‚Üí **B**
4. **B** –ø—Ä–∏–Ω–∏–º–∞–µ—Ç ‚Üí `call:answer`
5. **Backend** –¥–æ–±–∞–≤–ª—è–µ—Ç A –∏ B –≤ `usersInCall`
6. –ù–∞—á–∏–Ω–∞–µ—Ç—Å—è –≤–∏–¥–µ–æ/–∞—É–¥–∏–æ —Å–≤—è–∑—å

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–Ω—è—Ç
1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å A** –∑–≤–æ–Ω–∏—Ç **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é B**
2. **B —É–∂–µ –Ω–∞ –∑–≤–æ–Ω–∫–µ** —Å C (B –≤ `usersInCall`)
3. **Backend** –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `call:busy` ‚Üí **A**
4. **A** –≤–∏–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ: "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–Ω—è—Ç –¥—Ä—É–≥–∏–º –∑–≤–æ–Ω–∫–æ–º"
5. –ó–≤–æ–Ω–æ–∫ –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ñ—Ñ–ª–∞–π–Ω
1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å A** –∑–≤–æ–Ω–∏—Ç **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é B**
2. **B –æ—Ñ—Ñ–ª–∞–π–Ω** (–Ω–µ—Ç WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è)
3. **Backend** –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `call:error` ‚Üí **A**
4. **A** –≤–∏–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ: "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ñ—Ñ–ª–∞–π–Ω"

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –†–∞–∑—Ä—ã–≤ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –≤–æ –≤—Ä–µ–º—è –∑–≤–æ–Ω–∫–∞
1. **A** –∏ **B** –Ω–∞ –∑–≤–æ–Ω–∫–µ
2. **B** —Ç–µ—Ä—è–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ (WebSocket disconnect)
3. **Backend** –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç —Ä–∞–∑—Ä—ã–≤:
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `call:end` ‚Üí **A** (—Å `reason: 'connection_lost'`)
   - –£–¥–∞–ª—è–µ—Ç A –∏ B –∏–∑ `usersInCall`
   - –£–¥–∞–ª—è–µ—Ç –∑–≤–æ–Ω–æ–∫ –∏–∑ `activeCalls`
4. **A** –≤–∏–¥–∏—Ç, —á—Ç–æ –∑–≤–æ–Ω–æ–∫ –∑–∞–≤–µ—Ä—à—ë–Ω

---

## üöÄ –î–ï–ü–õ–û–ô:

```bash
# 1. –ö–æ–º–º–∏—Ç –∏ –ø—É—à
git add .
git commit -m "feat: –¥–æ–±–∞–≤–ª–µ–Ω —Å—Ç–∞—Ç—É—Å '–∑–∞–Ω—è—Ç–æ' –¥–ª—è –∑–≤–æ–Ω–∫–æ–≤ –∏ —É–ª—É—á—à–µ–Ω–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è"
git push origin main

# 2. –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd /var/www/messager
git pull origin main

# 3. Backend (—Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω –ª–æ–∫–∞–ª—å–Ω–æ –∏ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω)
scp backend/temp-dist/websocket/websocket.gateway.js root@89.169.39.244:/var/www/messager/backend/dist/websocket/websocket.gateway.js
pm2 restart messenger-api

# 4. Frontend
cd frontend-web
npx vite build

# 5. Nginx reload
sudo systemctl reload nginx
```

## üì¶ –†–ï–ó–£–õ–¨–¢–ê–¢ –°–ë–û–†–ö–ò:

**Frontend**: `index-CsNGHAIt.js` (380.90 KB, gzip: 117.18 KB)  
**Backend**: websocket.gateway.js –æ–±–Ω–æ–≤–ª—ë–Ω  
**PM2**: –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω  

---

## üß™ –ö–ê–ö –ü–†–û–¢–ï–°–¢–ò–†–û–í–ê–¢–¨:

### –¢–µ—Å—Ç 1: –ù–æ—Ä–º–∞–ª—å–Ω—ã–π –∑–≤–æ–Ω–æ–∫ (–æ–±–∞ –æ–Ω–ª–∞–π–Ω, –Ω–µ –∑–∞–Ω—è—Ç—ã)
1. –û—Ç–∫—Ä–æ–π—Ç–µ https://neekloai.ru –Ω–∞ **–¥–≤—É—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö**
2. –í–æ–π–¥–∏—Ç–µ –ø–æ–¥ —Ä–∞–∑–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
3. –ü–æ–∑–≤–æ–Ω–∏—Ç–µ —Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ A –Ω–∞ B
4. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
   - ‚úÖ –ù–∞ B –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫
   - ‚úÖ –ü–æ—Å–ª–µ –ø—Ä–∏–Ω—è—Ç–∏—è —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —Å–≤—è–∑—å

### –¢–µ—Å—Ç 2: –ó–≤–æ–Ω–æ–∫ –∑–∞–Ω—è—Ç–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
1. **–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ A, B, C** –æ–Ω–ª–∞–π–Ω
2. **A –∑–≤–æ–Ω–∏—Ç B** ‚Üí B –ø—Ä–∏–Ω–∏–º–∞–µ—Ç (A –∏ B –Ω–∞ –∑–≤–æ–Ω–∫–µ)
3. **C –ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–∑–≤–æ–Ω–∏—Ç—å B**
4. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
   - ‚úÖ C –≤–∏–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ: "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–Ω—è—Ç –¥—Ä—É–≥–∏–º –∑–≤–æ–Ω–∫–æ–º"
   - ‚ùå –ó–≤–æ–Ω–æ–∫ –ù–ï –¥–æ—Ö–æ–¥–∏—Ç –¥–æ B

### –¢–µ—Å—Ç 3: –ó–≤–æ–Ω–æ–∫ –æ—Ñ—Ñ–ª–∞–π–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
1. **A –æ–Ω–ª–∞–π–Ω**, **B –æ—Ñ—Ñ–ª–∞–π–Ω** (–∑–∞–∫—Ä—ã–ª –≤–∫–ª–∞–¥–∫—É)
2. **A –ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–∑–≤–æ–Ω–∏—Ç—å B**
3. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
   - ‚úÖ A –≤–∏–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ: "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ñ—Ñ–ª–∞–π–Ω"
   - ‚ùå –ó–≤–æ–Ω–æ–∫ –ù–ï –ø—Ä–æ—Ö–æ–¥–∏—Ç

### –¢–µ—Å—Ç 4: –†–∞–∑—Ä—ã–≤ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –≤–æ –≤—Ä–µ–º—è –∑–≤–æ–Ω–∫–∞
1. **A –∏ B –Ω–∞ –∑–≤–æ–Ω–∫–µ**
2. **B –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –≤–∫–ª–∞–¥–∫—É** –∏–ª–∏ —Ç–µ—Ä—è–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç
3. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
   - ‚úÖ –£ A –∑–≤–æ–Ω–æ–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è
   - ‚úÖ A –≤–∏–¥–∏—Ç, —á—Ç–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –ø–æ—Ç–µ—Ä—è–Ω–æ

---

## üîç –ü–†–û–í–ï–†–ö–ê –õ–û–ì–û–í:

### Backend –ª–æ–≥–∏:
```bash
ssh root@89.169.39.244 "pm2 logs messenger-api --lines 50"
```

–ß—Ç–æ –∏—Å–∫–∞—Ç—å:
- `Call initiated: userId -> userId in chat chatId`
- `Call blocked - user busy: userId in chat busyChatId`
- `Call answered: chatId`
- `Call ended: chatId`
- `Call ended due to disconnect: chatId (user: userId)`

### Frontend –ª–æ–≥–∏ (–±—Ä–∞—É–∑–µ—Ä):
–û—Ç–∫—Ä–æ–π—Ç–µ **DevTools (F12)** ‚Üí **Console**

–ß—Ç–æ –∏—Å–∫–∞—Ç—å:
- `ICE servers: Custom TURN 89.169.39.244 (4 servers)`
- `call:busy - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–Ω—è—Ç –¥—Ä—É–≥–∏–º –∑–≤–æ–Ω–∫–æ–º`
- `call:error - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ñ—Ñ–ª–∞–π–Ω`

---

## üìä –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò:

### –°–æ–±—ã—Ç–∏—è WebSocket:

#### –û—Ç –∫–ª–∏–µ–Ω—Ç–∞ ‚Üí Backend:
- `call:initiate` - –∏–Ω–∏—Ü–∏–∞—Ü–∏—è –∑–≤–æ–Ω–∫–∞
- `call:answer` - –ø—Ä–∏–Ω—è—Ç–∏–µ –∑–≤–æ–Ω–∫–∞
- `call:reject` - –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –∑–≤–æ–Ω–∫–∞
- `call:end` - –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–≤–æ–Ω–∫–∞
- `call:ice-candidate` - ICE –∫–∞–Ω–¥–∏–¥–∞—Ç

#### –û—Ç Backend ‚Üí –ö–ª–∏–µ–Ω—Ç:
- `call:offer` - –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –∑–≤–æ–Ω–∫–∞
- `call:answer` - –æ—Ç–≤–µ—Ç –Ω–∞ –∑–≤–æ–Ω–æ–∫
- `call:ice-candidate` - ICE –∫–∞–Ω–¥–∏–¥–∞—Ç
- `call:end` - –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–≤–æ–Ω–∫–∞
- `call:rejected` - –∑–≤–æ–Ω–æ–∫ –æ—Ç–∫–ª–æ–Ω—ë–Ω
- `call:no-answer` - –Ω–µ—Ç –æ—Ç–≤–µ—Ç–∞
- `call:busy` - –∞–±–æ–Ω–µ–Ω—Ç –∑–∞–Ω—è—Ç (**–ù–û–í–û–ï**)
- `call:error` - –æ—à–∏–±–∫–∞ –∑–≤–æ–Ω–∫–∞ (**–ù–û–í–û–ï**)

---

## ‚úÖ –ò–¢–û–ì–û:

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:
1. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –ø–æ–ª—É—á–∞—Ç–µ–ª—å **–æ–Ω–ª–∞–π–Ω**
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –ø–æ–ª—É—á–∞—Ç–µ–ª—å **–Ω–µ –∑–∞–Ω—è—Ç**
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä **–Ω–µ –∑–∞–Ω—è—Ç**
4. ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–Ω—è—Ç"
5. ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ñ—Ñ–ª–∞–π–Ω"
6. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–≤–æ–Ω–∫–∞ –ø—Ä–∏ —Ä–∞–∑—Ä—ã–≤–µ WebSocket
7. ‚úÖ –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –æ –∑–≤–æ–Ω–∫–µ –ø—Ä–∏ disconnect

### –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:
- ‚úÖ `backend/src/websocket/websocket.gateway.ts` (+69 —Å—Ç—Ä–æ–∫)
- ‚úÖ `frontend-web/src/services/webrtc.service.ts` (+32 —Å—Ç—Ä–æ–∫–∏)
- ‚úÖ `frontend-web/src/components/VideoCall.tsx` (+14 —Å—Ç—Ä–æ–∫)

### Git:
```
Commit: f7037ed
Message: feat: –¥–æ–±–∞–≤–ª–µ–Ω —Å—Ç–∞—Ç—É—Å '–∑–∞–Ω—è—Ç–æ' –¥–ª—è –∑–≤–æ–Ω–∫–æ–≤ –∏ —É–ª—É—á—à–µ–Ω–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
```

---

## üéâ –ì–û–¢–û–í–û –ö –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ!

**URL**: https://neekloai.ru

**–ù–æ–≤—ã–π JS —Ñ–∞–π–ª**: `index-CsNGHAIt.js` (–æ—á–∏—Å—Ç–∏—Ç–µ –∫–µ—à!)

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Å–µ 4 —Å—Ü–µ–Ω–∞—Ä–∏—è** ‚Üí –∑–≤–æ–Ω–∫–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å **—Å—Ç–∞–±–∏–ª—å–Ω—ã–º–∏** –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å "–∑–∞–Ω—è—Ç–æ"! üöÄ
