# MESSAGER - MVP –ú–ï–°–°–ï–ù–î–ñ–ï–†

–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π E2EE —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ Redis –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Telegram MiniApp.

## üöÄ –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js 18+
- PostgreSQL 14+
- Redis 7+ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏)
- npm –∏–ª–∏ yarn

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**
```bash
git clone <repository-url>
cd Messager
```

2. **Backend**
```bash
cd backend
npm install
cp .env.example .env
# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å .env —Ñ–∞–π–ª
npx prisma migrate dev
npx prisma generate
npm run start:dev
```

3. **Frontend Web**
```bash
cd frontend-web
npm install
cp .env.example .env
# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å .env —Ñ–∞–π–ª
npm run dev
```

4. **Mobile (Expo)**
```bash
cd mobile
npm install
npx expo start
```

5. **Redis (–¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏)**
```bash
docker run -d -p 6379:6379 redis:7-alpine
# –∏–ª–∏
redis-server
```

---

## üìã –§–£–ù–ö–¶–ò–û–ù–ê–õ–¨–ù–û–°–¢–¨

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (JWT)
- ‚úÖ –¢–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (WebSocket)
- ‚úÖ –ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- ‚úÖ –í–∏–¥–µ–æ–∑–≤–æ–Ω–∫–∏ 1-–Ω–∞-1 (WebRTC)
- ‚úÖ E2EE —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å —á–µ—Ä–µ–∑ Redis
- ‚úÖ Telegram MiniApp –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### E2EE (End-to-End Encryption)

- RSA (2048 –±–∏—Ç) –¥–ª—è –æ–±–º–µ–Ω–∞ –∫–ª—é—á–∞–º–∏
- AES-256-GCM –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —á–∞—Ç–∞
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –≤ UI

### –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å

- Redis –∞–¥–∞–ø—Ç–µ—Ä –¥–ª—è Socket.io
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Pub/Sub

### Telegram MiniApp

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ initData
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram WebApp API
- –†–∞–±–æ—Ç–∞ –≤–Ω—É—Ç—Ä–∏ Telegram WebView

---

## üîß –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø

### Backend .env

```env
DATABASE_URL="postgresql://user:password@localhost:5432/messager"
JWT_SECRET="your-secret-key"
JWT_EXPIRES_IN="7d"
REDIS_URL="redis://localhost:6379"
TELEGRAM_BOT_TOKEN="your_bot_token"
PORT=3000
```

### Frontend Web .env

```env
VITE_API_URL=http://localhost:3000
VITE_WS_URL=http://localhost:3000
```

---

## üìö –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- `ARCHITECTURE.md` - –æ–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã
- `E2EE_ARCHITECTURE.md` - –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ E2EE
- `REDIS_SCALING_ARCHITECTURE.md` - –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Redis
- `DATABASE_SCHEMA.md` - —Å—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞

- `DEVELOPMENT_PLAN.md` - –ø–ª–∞–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- `IMPLEMENTATION_GUIDE.md` - —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- `QUICK_START.md` - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- `TESTING_GUIDE.md` - —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞

- `REDIS_SETUP.md` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Redis
- `TELEGRAM_BOT_SETUP.md` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Bot
- `DEPLOYMENT_CHECKLIST.md` - —á–µ–∫–ª–∏—Å—Ç –¥–ª—è deployment

### –°—Ç–∞—Ç—É—Å

- `IMPLEMENTATION_SUMMARY.md` - –∏—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç
- `FINAL_SUMMARY.md` - —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Ä–µ–∑—é–º–µ
- `COMPLETE_IMPLEMENTATION.md` - –ø–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### E2EE

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–≤—É—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
2. –û—Ç–∫—Ä—ã—Ç—å —á–∞—Ç –º–µ–∂–¥—É –Ω–∏–º–∏
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä üîí E2EE
4. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ/–¥–µ—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ

### Redis

1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –¥–≤–∞ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ Backend
2. –ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–æ–≤ –∫ —Ä–∞–∑–Ω—ã–º —Å–µ—Ä–≤–µ—Ä–∞–º
3. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç–∞–≤–∫—É –Ω–∞ –¥—Ä—É–≥–æ–º —Å–µ—Ä–≤–µ—Ä–µ

### Telegram

1. –°–æ–∑–¥–∞—Ç—å Bot —á–µ—Ä–µ–∑ @BotFather
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å MiniApp URL
3. –û—Ç–∫—Ä—ã—Ç—å MiniApp –≤ Telegram
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: `TESTING_GUIDE.md`

---

## üèóÔ∏è –°–¢–†–£–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê

```
Messager/
‚îú‚îÄ‚îÄ backend/              # NestJS Backend
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/        # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ encryption/  # E2EE –º–æ–¥—É–ª—å
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ websocket/   # WebSocket Gateway
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îî‚îÄ‚îÄ prisma/          # Prisma —Å—Ö–µ–º—ã
‚îú‚îÄ‚îÄ frontend-web/        # React + Vite Frontend
‚îÇ   ‚îî‚îÄ‚îÄ src/
‚îÇ       ‚îú‚îÄ‚îÄ services/    # API –∏ WebSocket –∫–ª–∏–µ–Ω—Ç—ã
‚îÇ       ‚îú‚îÄ‚îÄ pages/       # –°—Ç—Ä–∞–Ω–∏—Ü—ã
‚îÇ       ‚îî‚îÄ‚îÄ components/  # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îú‚îÄ‚îÄ mobile/              # React Native (Expo)
‚îÇ   ‚îî‚îÄ‚îÄ src/
‚îÇ       ‚îú‚îÄ‚îÄ services/    # API –∏ WebSocket –∫–ª–∏–µ–Ω—Ç—ã
‚îÇ       ‚îú‚îÄ‚îÄ screens/     # –≠–∫—Ä–∞–Ω—ã
‚îÇ       ‚îî‚îÄ‚îÄ components/  # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îî‚îÄ‚îÄ docs/                # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

---

## üîê –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨

- JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- E2EE —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
- –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π (bcrypt)
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ Telegram initData

---

## üìä –¢–ï–•–ù–û–õ–û–ì–ò–ò

### Backend
- NestJS
- PostgreSQL + Prisma
- Socket.io (WebSocket)
- Redis (–º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å)
- JWT
- bcrypt

### Frontend Web
- React + Vite
- TypeScript
- TailwindCSS
- Socket.io-client
- Web Crypto API (E2EE)

### Mobile
- React Native (Expo)
- TypeScript
- Socket.io-client
- expo-crypto (E2EE)
- react-native-webrtc

---

## üöÄ DEPLOYMENT

### –ù–∞ –≤–∞—à —Å–µ—Ä–≤–µ—Ä (dragon)

**–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç:**
- `START_DEPLOY.md` - –Ω–∞—á–Ω–∏—Ç–µ –æ—Ç—Å—é–¥–∞!
- `QUICK_DEPLOY_DRAGON.md` - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
- `README_SSH.md` - —Ä–∞–±–æ—Ç–∞ —Å SSH

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSH:**
- `WINDOWS_SSH_SETUP.md` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è Windows
- `SSH_SETUP.md` - –æ–±—â–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ SSH

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
- `SERVER_CONFIG.md` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞

### –ù–∞ —Å–µ—Ä–≤–µ—Ä Beget (–æ–±—â–µ–µ)

**–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç:**
- `BEGET_QUICK_START.md` - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- `DEPLOYMENT_BEGET.md` - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- `BEGET_DEPLOYMENT_CHECKLIST.md` - —á–µ–∫–ª–∏—Å—Ç

**–ü–æ—à–∞–≥–æ–≤–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ:**
- `DEPLOYMENT_STEPS.md` - –¥–µ—Ç–∞–ª—å–Ω—ã–µ —à–∞–≥–∏
- `PRODUCTION_CONFIG.md` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è production

### –û–±—â–∏–π deployment

–°–º. `DEPLOYMENT_CHECKLIST.md` –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —á–µ–∫–ª–∏—Å—Ç–∞.

### –û—Å–Ω–æ–≤–Ω—ã–µ —à–∞–≥–∏

1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
2. –í—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –ë–î
3. –ó–∞–ø—É—Å—Ç–∏—Ç—å Redis
4. –°–æ–±—Ä–∞—Ç—å Frontend: `npm run build`
5. –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

---

## üìù –õ–ò–¶–ï–ù–ó–ò–Ø

[–£–∫–∞–∑–∞—Ç—å –ª–∏—Ü–µ–Ω–∑–∏—é]

---

## üë• –ê–í–¢–û–†–´

[–£–∫–∞–∑–∞—Ç—å –∞–≤—Ç–æ—Ä–æ–≤]

---

## ü§ù –í–ö–õ–ê–î –í –ü–†–û–ï–ö–¢

[–£–∫–∞–∑–∞—Ç—å –∫–∞–∫ –≤–Ω–æ—Å–∏—Ç—å –≤–∫–ª–∞–¥]

---

## üìû –ü–û–î–î–ï–†–ñ–ö–ê

[–£–∫–∞–∑–∞—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏]
