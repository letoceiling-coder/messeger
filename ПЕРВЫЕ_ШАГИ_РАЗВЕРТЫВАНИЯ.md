# ÐŸÐ•Ð Ð’Ð«Ð• Ð¨ÐÐ“Ð˜ Ð ÐÐ—Ð’Ð•Ð Ð¢Ð«Ð’ÐÐÐ˜Ð¯

## ðŸŽ¯ Ð§Ð¢Ðž ÐÐ£Ð–ÐÐž Ð¡Ð”Ð•Ð›ÐÐ¢Ð¬ ÐŸÐ Ð¯ÐœÐž Ð¡Ð•Ð™Ð§ÐÐ¡

### 1. ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÐµÑÑŒ Ðº ÑÐµÑ€Ð²ÐµÑ€Ñƒ

```bash
ssh dsc23ytp@5.101.156.207
```

---

### 2. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹Ñ‚Ðµ Backend

```bash
cd ~/messager/backend

# Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ .env.production
nano .env.production
```

**Ð¡ÐºÐ¾Ð¿Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ Ð¸ Ð¾Ñ‚Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ:**

```env
DATABASE_URL=postgresql://user:password@localhost:5432/messager
JWT_SECRET=your-secret-key-change-this-in-production-min-32-chars
REDIS_URL=redis://localhost:6379
PORT=3000
NODE_ENV=production
CORS_ORIGIN=https://parser-auto.siteaccess.ru
TELEGRAM_BOT_TOKEN=your-telegram-bot-token-optional
```

**Ð’ÐÐ–ÐÐž:**
- ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ PostgreSQL Ð¸Ð· **Ð¿Ð°Ð½ÐµÐ»Ð¸ Beget**
- Ð—Ð°Ð¼ÐµÐ½Ð¸Ñ‚Ðµ `user`, `password`, `messager` Ð½Ð° Ñ€ÐµÐ°Ð»ÑŒÐ½Ñ‹Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ
- Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ `JWT_SECRET` (Ð¼Ð¸Ð½Ð¸Ð¼ÑƒÐ¼ 32 ÑÐ¸Ð¼Ð²Ð¾Ð»Ð°, ÑÐ»ÑƒÑ‡Ð°Ð¹Ð½Ð°Ñ ÑÑ‚Ñ€Ð¾ÐºÐ°)

---

### 3. Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ð±Ð°Ð·Ñƒ Ð´Ð°Ð½Ð½Ñ‹Ñ…

**Ð§ÐµÑ€ÐµÐ· Ð¿Ð°Ð½ÐµÐ»ÑŒ Beget:**
1. Ð—Ð°Ð¹Ð´Ð¸Ñ‚Ðµ Ð² Ð¿Ð°Ð½ÐµÐ»ÑŒ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ
2. ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ Ñ€Ð°Ð·Ð´ÐµÐ» "Ð‘Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ…" â†’ "PostgreSQL"
3. Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ð½Ð¾Ð²ÑƒÑŽ Ð±Ð°Ð·Ñƒ Ð´Ð°Ð½Ð½Ñ‹Ñ… `messager`
4. Ð—Ð°Ð¿Ð¾Ð¼Ð½Ð¸Ñ‚Ðµ Ð»Ð¾Ð³Ð¸Ð½ Ð¸ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ

**Ð˜Ð»Ð¸ Ñ‡ÐµÑ€ÐµÐ· ÐºÐ¾Ð¼Ð°Ð½Ð´Ð½ÑƒÑŽ ÑÑ‚Ñ€Ð¾ÐºÑƒ:**
```bash
createdb messager
```

---

### 4. Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸ Ð¸ Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ Backend

```bash
cd ~/messager/backend

# Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸
npm install --production

# Ð“ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ñ Prisma Client
npx prisma generate

# ÐœÐ¸Ð³Ñ€Ð°Ñ†Ð¸Ñ Ð‘Ð”
npx prisma migrate deploy

# Ð¡Ð±Ð¾Ñ€ÐºÐ°
npm run build

# Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¸
mkdir -p uploads/audio logs

# Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ PM2
npm install -g pm2

# Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ
pm2 start ecosystem.config.js
pm2 save
```

---

### 5. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹Ñ‚Ðµ Frontend

```bash
cd ~/messager/frontend-web

# Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ .env.production
cat > .env.production << 'EOF'
VITE_API_URL=https://parser-auto.siteaccess.ru/api
VITE_WS_URL=wss://parser-auto.siteaccess.ru
EOF

# Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸
npm install

# Ð¡Ð±Ð¾Ñ€ÐºÐ°
npm run build

# Ð Ð°Ð·Ð¼ÐµÑÑ‚Ð¸Ñ‚ÑŒ build Ð² public_html
cp -r dist/* ~/parser-auto.site-access.ru/public_html/
```

---

### 6. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ñƒ

```bash
# Backend
curl http://localhost:3000/health

# PM2 ÑÑ‚Ð°Ñ‚ÑƒÑ
pm2 status
pm2 logs messager-backend
```

**ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ Ð² Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ðµ:**
- `https://parser-auto.siteaccess.ru/`

---

## âš ï¸ Ð§ÐÐ¡Ð¢Ð«Ð• ÐŸÐ ÐžÐ‘Ð›Ð•ÐœÐ«

### Ð‘Ð°Ð·Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð½Ðµ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡Ð°ÐµÑ‚ÑÑ
- ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ `DATABASE_URL` Ð² `.env.production`
- Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ, Ñ‡Ñ‚Ð¾ Ð±Ð°Ð·Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ… ÑÐ¾Ð·Ð´Ð°Ð½Ð°
- ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð»Ð¾Ð³Ð¸Ð½ Ð¸ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ

### PM2 Ð½Ðµ Ð·Ð°Ð¿ÑƒÑÐºÐ°ÐµÑ‚ÑÑ
```bash
pm2 logs messager-backend
# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð»Ð¾Ð³Ð¸ Ð½Ð° Ð¾ÑˆÐ¸Ð±ÐºÐ¸
```

### Frontend Ð½Ðµ Ð¾Ñ‚ÐºÑ€Ñ‹Ð²Ð°ÐµÑ‚ÑÑ
- ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ, Ñ‡Ñ‚Ð¾ Ñ„Ð°Ð¹Ð»Ñ‹ ÑÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½Ñ‹: `ls -la ~/parser-auto.site-access.ru/public_html/`
- ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Nginx

---

## âœ… Ð“ÐžÐ¢ÐžÐ’Ðž!

ÐŸÐ¾ÑÐ»Ðµ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð²ÑÐµÑ… ÑˆÐ°Ð³Ð¾Ð² Ð¿Ñ€Ð¾ÐµÐºÑ‚ Ð´Ð¾Ð»Ð¶ÐµÐ½ Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ:
- Frontend: `https://parser-auto.siteaccess.ru/`
- Backend API: `https://parser-auto.siteaccess.ru/api`
