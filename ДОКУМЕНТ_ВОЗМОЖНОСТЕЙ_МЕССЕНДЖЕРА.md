# üì± –î–û–ö–£–ú–ï–ù–¢ –í–û–ó–ú–û–ñ–ù–û–°–¢–ï–ô –ò –§–£–ù–ö–¶–ò–û–ù–ê–õ–ê –ú–ï–°–°–ï–ù–î–ñ–ï–†–ê

## üéØ –û–ë–©–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø

**Messager** - –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π:
- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- ‚úÖ –¢–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –ì–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –í–∏–¥–µ–æ–∑–≤–æ–Ω–∫–æ–≤ 1-–Ω–∞-1 (WebRTC)
- ‚úÖ End-to-End Encryption (E2EE)
- ‚úÖ Telegram MiniApp –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- ‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ Redis

---

## üîê –ê–£–¢–ï–ù–¢–ò–§–ò–ö–ê–¶–ò–Ø –ò –†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**URL:** `http://89.169.39.244/register`

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É:
   - **Email** - –∞–¥—Ä–µ—Å —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã
   - **Username** - –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—É–Ω–∏–∫–∞–ª—å–Ω–æ–µ)
   - **Password** - –ø–∞—Ä–æ–ª—å (–º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤)
3. –ù–∞–∂–º–∏—Ç–µ "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è"
4. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤—Ö–æ–¥

**API Endpoint:**
```
POST /api/auth/register
Body: {
  "email": "user@example.com",
  "username": "username",
  "password": "password123"
}
```

### –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É

**URL:** `http://89.169.39.244/login`

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤—Ö–æ–¥–∞
2. –í–≤–µ–¥–∏—Ç–µ:
   - **Email** - –∞–¥—Ä–µ—Å —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã
   - **Password** - –ø–∞—Ä–æ–ª—å
3. –ù–∞–∂–º–∏—Ç–µ "–í–æ–π—Ç–∏"
4. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—Ö–æ–¥–∞ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤

**API Endpoint:**
```
POST /api/auth/login
Body: {
  "email": "user@example.com",
  "password": "password123"
}
Response: {
  "accessToken": "jwt_token",
  "user": {
    "id": "user_id",
    "email": "user@example.com",
    "username": "username"
  }
}
```

### Telegram –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

**URL:** `http://89.169.39.244/telegram`

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É Telegram MiniApp
2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram `initData`
3. –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—Ö–æ–¥–µ

**API Endpoint:**
```
POST /api/auth/telegram
Body: {
  "initData": "telegram_init_data_string"
}
```

---

## üí¨ –ß–ê–¢–´ –ò –°–û–û–ë–©–ï–ù–ò–Ø

### –°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤

**URL:** `http://89.169.39.244/`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Å–µ—Ö —á–∞—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –ø–æ—Å–ª–µ–¥–Ω–µ–º—É —Å–æ–æ–±—â–µ–Ω–∏—é
- –ü–æ–∫–∞–∑ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –∫–∞–∂–¥–æ–º —á–∞—Ç–µ
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ —á–∞—Ç–∞

**API Endpoint:**
```
GET /api/chats
Headers: Authorization: Bearer <token>
```

### –û—Ç–∫—Ä—ã—Ç–∏–µ —á–∞—Ç–∞

**URL:** `http://89.169.39.244/chat/:chatId`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- –û—Ç–ø—Ä–∞–≤–∫–∞ –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- –í–∏–¥–µ–æ–∑–≤–æ–Ω–∫–∏
- E2EE —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**API Endpoint:**
```
GET /api/chats/:id
GET /api/messages?chatId=:chatId
```

### –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ —á–∞—Ç
2. –í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞
3. –ù–∞–∂–º–∏—Ç–µ Enter –∏–ª–∏ –∫–Ω–æ–ø–∫—É –æ—Ç–ø—Ä–∞–≤–∫–∏
4. –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ WebSocket –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

**WebSocket Event:**
```javascript
socket.emit('message:send', {
  chatId: 'chat_id',
  content: '–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è',
  isEncrypted: false
});
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π

**WebSocket Event:**
```javascript
socket.on('message:received', (message) => {
  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
});
```

**–°—Ç–∞—Ç—É—Å—ã –¥–æ—Å—Ç–∞–≤–∫–∏:**
- `sent` - –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ
- `delivered` - –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ
- `read` - –ø—Ä–æ—á–∏—Ç–∞–Ω–æ

---

## üé§ –ì–û–õ–û–°–û–í–´–ï –°–û–û–ë–©–ï–ù–ò–Ø

### –ó–∞–ø–∏—Å—å –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ —á–∞—Ç
2. –ù–∞–∂–º–∏—Ç–µ –∏ —É–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ –∫–Ω–æ–ø–∫—É –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞
3. –ì–æ–≤–æ—Ä–∏—Ç–µ –≤ –º–∏–∫—Ä–æ—Ñ–æ–Ω
4. –û—Ç–ø—É—Å—Ç–∏—Ç–µ –∫–Ω–æ–ø–∫—É –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
5. –ò–ª–∏ –Ω–∞–∂–º–∏—Ç–µ "–û—Ç–º–µ–Ω–∞" –¥–ª—è –æ—Ç–º–µ–Ω—ã –∑–∞–ø–∏—Å–∏

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –í–∏–∑—É–∞–ª—å–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è –∑–∞–ø–∏—Å–∏
- –ü—Ä–µ–¥–ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ—Å–ª–µ –∑–∞–ø–∏—Å–∏

**API Endpoint:**
```
POST /api/messages/upload-audio
Content-Type: multipart/form-data
Body: {
  chatId: "chat_id",
  audio: File
}
```

### –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –í —á–∞—Ç–µ –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –≥–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ
3. –ö–æ–Ω—Ç—Ä–æ–ª—å –≥—Ä–æ–º–∫–æ—Å—Ç–∏ –∏ –ø–∞—É–∑–∞

**–§–æ—Ä–º–∞—Ç:**
- –§–æ—Ä–º–∞—Ç: WebM/OGG
- –•—Ä–∞–Ω–µ–Ω–∏–µ: `/uploads/audio/` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- –î–æ—Å—Ç—É–ø: `http://89.169.39.244/uploads/audio/:filename`

---

## üìπ –í–ò–î–ï–û–ó–í–û–ù–ö–ò (WebRTC)

### –ò–Ω–∏—Ü–∏–∞—Ü–∏—è –≤–∏–¥–µ–æ–∑–≤–æ–Ω–∫–∞

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ —á–∞—Ç —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –≤–∏–¥–µ–æ–∑–≤–æ–Ω–∫–∞
3. –û–∂–∏–¥–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ –æ—Ç —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞
4. –ü–æ—Å–ª–µ –æ—Ç–≤–µ—Ç–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

**WebSocket Events:**
```javascript
// –ò–Ω–∏—Ü–∏–∞—Ü–∏—è –∑–≤–æ–Ω–∫–∞
socket.emit('call:initiate', {
  chatId: 'chat_id',
  offer: RTCSessionDescriptionInit
});

// –û—Ç–≤–µ—Ç –Ω–∞ –∑–≤–æ–Ω–æ–∫
socket.emit('call:answer', {
  chatId: 'chat_id',
  answer: RTCSessionDescriptionInit
});

// –û–±–º–µ–Ω ICE –∫–∞–Ω–¥–∏–¥–∞—Ç–∞–º–∏
socket.emit('call:ice-candidate', {
  chatId: 'chat_id',
  candidate: RTCIceCandidateInit
});

// –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–≤–æ–Ω–∫–∞
socket.emit('call:end', {
  chatId: 'chat_id'
});
```

### –ü—Ä–∏–µ–º –≤—Ö–æ–¥—è—â–µ–≥–æ –∑–≤–æ–Ω–∫–∞

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –ü–æ–ª—É—á–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –≤—Ö–æ–¥—è—â–µ–º –∑–≤–æ–Ω–∫–µ
2. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –ø—Ä–∏–Ω—è—Ç–∏—è/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è
3. –ü–æ—Å–ª–µ –ø—Ä–∏–Ω—è—Ç–∏—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –í–∏–¥–µ–æ –∏ –∞—É–¥–∏–æ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- P2P —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ WebRTC
- STUN/TURN —Å–µ—Ä–≤–µ—Ä—ã –¥–ª—è NAT traversal
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–∏

---

## üîí END-TO-END ENCRYPTION (E2EE)

### –í–∫–ª—é—á–µ–Ω–∏–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ —á–∞—Ç
2. –í–∫–ª—é—á–∏—Ç–µ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å "–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ"
3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª—é—á–µ–π
4. –û–±–º–µ–Ω –ø—É–±–ª–∏—á–Ω—ã–º–∏ –∫–ª—é—á–∞–º–∏ —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–µ—Ä

**–ê–ª–≥–æ—Ä–∏—Ç–º—ã:**
- **RSA 2048 –±–∏—Ç** - –¥–ª—è –æ–±–º–µ–Ω–∞ –∫–ª—é—á–∞–º–∏
- **AES-256-GCM** - –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π

**–ü—Ä–æ—Ü–µ—Å—Å —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è:**
1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–∞—Ä—ã –∫–ª—é—á–µ–π (RSA) –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏
2. –û—Ç–ø—Ä–∞–≤–∫–∞ –ø—É–±–ª–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
3. –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—É–±–ª–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞
4. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞ (AES)
5. –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞ –ø—É–±–ª–∏—á–Ω—ã–º –∫–ª—é—á–æ–º —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞
6. –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã–º –∫–ª—é—á–æ–º
7. –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –∫–ª—é—á–∞

**API Endpoints:**
```
POST /api/encryption/public-key
Body: {
  "publicKey": "base64_encoded_key"
}

GET /api/encryption/public-key/:userId
```

**–ò–Ω–¥–∏–∫–∞—Ü–∏—è:**
- üîí –ò–∫–æ–Ω–∫–∞ –∑–∞–º–∫–∞ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–Ω–æ–º —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–∏
- –°–æ–æ–±—â–µ–Ω–∏—è –ø–æ–º–µ—á–∞—é—Ç—Å—è –∫–∞–∫ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ

---

## üîå WEBSOCKET –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–ï

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ WebSocket

**URL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**
- Production: `ws://89.169.39.244` –∏–ª–∏ `wss://89.169.39.244` (–ø—Ä–∏ HTTPS)
- –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è: `VITE_WS_URL`

**–ü—Ä–æ—Ü–µ—Å—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**
1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
2. –ü–µ—Ä–µ–¥–∞—á–∞ JWT —Ç–æ–∫–µ–Ω–∞ –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ —Ä–∞–∑—Ä—ã–≤–µ

**–°–æ–±—ã—Ç–∏—è WebSocket:**

**Client ‚Üí Server:**
- `message:send` - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
- `message:delivered` - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–æ—Å—Ç–∞–≤–∫–∏
- `call:initiate` - –∏–Ω–∏—Ü–∏–∞—Ü–∏—è –≤–∏–¥–µ–æ–∑–≤–æ–Ω–∫–∞
- `call:answer` - –æ—Ç–≤–µ—Ç –Ω–∞ –≤–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫
- `call:ice-candidate` - –æ–±–º–µ–Ω ICE –∫–∞–Ω–¥–∏–¥–∞—Ç–∞–º–∏
- `call:end` - –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –≤–∏–¥–µ–æ–∑–≤–æ–Ω–∫–∞

**Server ‚Üí Client:**
- `message:received` - –ø–æ–ª—É—á–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
- `user:online` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ–Ω–ª–∞–π–Ω
- `user:offline` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ñ–ª–∞–π–Ω
- `call:offer` - –≤—Ö–æ–¥—è—â–∏–π –≤–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫
- `call:answer` - –æ—Ç–≤–µ—Ç –Ω–∞ –≤–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫
- `call:ice-candidate` - ICE –∫–∞–Ω–¥–∏–¥–∞—Ç –æ—Ç —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞
- `call:end` - –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –≤–∏–¥–µ–æ–∑–≤–æ–Ω–∫–∞

**–°—Ç–∞—Ç—É—Å—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**
- `connected` - –ø–æ–¥–∫–ª—é—á–µ–Ω–æ
- `disconnected` - –æ—Ç–∫–ª—é—á–µ–Ω–æ
- `connecting` - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
- `error` - –æ—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

---

## üë• –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ò

### –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –ü–æ–∏—Å–∫ –ø–æ email –∏–ª–∏ username
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞
- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —á–∞—Ç–∞ —Å –Ω–∞–π–¥–µ–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º

**API Endpoint:**
```
GET /api/users/search?query=search_term
Headers: Authorization: Bearer <token>
```

### –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**API Endpoint:**
```
GET /api/users/me
Headers: Authorization: Bearer <token>
Response: {
  "id": "user_id",
  "email": "user@example.com",
  "username": "username",
  "avatarUrl": "url",
  "isOnline": true,
  "lastSeenAt": "2026-01-29T20:00:00Z"
}
```

---

## üìä –°–¢–ê–¢–£–°–´ –ò –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø

### –°—Ç–∞—Ç—É—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

- **Online** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ–Ω–ª–∞–π–Ω (–∑–µ–ª–µ–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä)
- **Offline** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ñ–ª–∞–π–Ω (—Å–µ—Ä—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä)
- **Last seen** - –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤–∏–∑–∏—Ç–∞

### –°—Ç–∞—Ç—É—Å—ã —Å–æ–æ–±—â–µ–Ω–∏–π

- **Sending** - –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- **Sent** - –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ
- **Delivered** - –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ
- **Read** - –ø—Ä–æ—á–∏—Ç–∞–Ω–æ

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

- –ù–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –í—Ö–æ–¥—è—â–∏–µ –≤–∏–¥–µ–æ–∑–≤–æ–Ω–∫–∏
- –ò–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

## üåê API ENDPOINTS

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- `POST /api/auth/register` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- `POST /api/auth/login` - –≤—Ö–æ–¥
- `POST /api/auth/telegram` - Telegram –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- `GET /api/users/me` - —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- `GET /api/users/search?query=...` - –ø–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –ß–∞—Ç—ã
- `GET /api/chats` - —Å–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤
- `GET /api/chats/:id` - –ø–æ–ª—É—á–∏—Ç—å —á–∞—Ç

### –°–æ–æ–±—â–µ–Ω–∏—è
- `GET /api/messages?chatId=...` - –ø–æ–ª—É—á–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è
- `POST /api/messages/upload-audio` - –∑–∞–≥—Ä—É–∑–∏—Ç—å –≥–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

### –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ
- `POST /api/encryption/public-key` - —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á
- `GET /api/encryption/public-key/:userId` - –ø–æ–ª—É—á–∏—Ç—å –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á

### Health
- `GET /api/health` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

---

## üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò

### Backend
- **Framework:** NestJS
- **Database:** MySQL (Prisma ORM)
- **WebSocket:** Socket.io —Å Redis –∞–¥–∞–ø—Ç–µ—Ä–æ–º
- **Authentication:** JWT
- **File Storage:** Multer –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤

### Frontend Web
- **Framework:** React + Vite + TypeScript
- **Styling:** TailwindCSS
- **Routing:** React Router
- **WebSocket:** Socket.io-client
- **WebRTC:** –Ω–∞—Ç–∏–≤–Ω—ã–π WebRTC API
- **Encryption:** Web Crypto API

### Mobile (Android)
- **Framework:** React Native (Expo)
- **WebSocket:** Socket.io-client
- **WebRTC:** react-native-webrtc
- **Encryption:** expo-crypto

### –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å
- **Redis:** –∞–¥–∞–ø—Ç–µ—Ä –¥–ª—è Socket.io (–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ)
- **PM2:** –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è Node.js –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- **Nginx:** reverse proxy –∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã

---

## üöÄ –†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–ï

### Production URL
- **Frontend:** `http://89.169.39.244/`
- **API:** `http://89.169.39.244/api`
- **WebSocket:** `ws://89.169.39.244`

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

**Backend (.env.production):**
```
DATABASE_URL=mysql://user:password@localhost:3306/database
JWT_SECRET=secret_key
REDIS_URL=redis://localhost:6379
PORT=30000
NODE_ENV=production
CORS_ORIGIN=http://89.169.39.244
TELEGRAM_BOT_TOKEN=bot_token
```

**Frontend (.env.production):**
```
VITE_API_URL=http://89.169.39.244/api
VITE_WS_URL=ws://89.169.39.244
```

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê –†–ê–ë–û–¢–û–°–ü–û–°–û–ë–ù–û–°–¢–ò

### –ß–µ–∫-–ª–∏—Å—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
- ‚úÖ –°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤
- ‚úÖ –û—Ç–∫—Ä—ã—Ç–∏–µ —á–∞—Ç–∞
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (–∑–∞–ø–∏—Å—å –∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ)
- ‚úÖ –í–∏–¥–µ–æ–∑–≤–æ–Ω–∫–∏ 1-–Ω–∞-1
- ‚úÖ E2EE —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –°—Ç–∞—Ç—É—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (online/offline)
- ‚úÖ –°—Ç–∞—Ç—É—Å—ã –¥–æ—Å—Ç–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
- ‚úÖ Telegram MiniApp –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

---

## üìù –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ

### –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫

1. **–û—Ç–∫—Ä–æ–π—Ç–µ:** `http://89.169.39.244/`
2. **–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å:**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ `/register`
   - –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É (email, username, password)
   - –ù–∞–∂–º–∏—Ç–µ "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è"
3. **–í–æ–π–¥–∏—Ç–µ:**
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
   - –ò–ª–∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ `/login`

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞

1. **–°–æ–∑–¥–∞–Ω–∏–µ —á–∞—Ç–∞:**
   - –ù–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –Ω–∞–∂–º–∏—Ç–µ "–ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π"
   - –ù–∞–π–¥–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –ù–∞–∂–º–∏—Ç–µ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —á–∞—Ç–∞

2. **–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ —á–∞—Ç
   - –í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç
   - –ù–∞–∂–º–∏—Ç–µ Enter –∏–ª–∏ –∫–Ω–æ–ø–∫—É –æ—Ç–ø—Ä–∞–≤–∫–∏

3. **–ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è:**
   - –ù–∞–∂–º–∏—Ç–µ –∏ —É–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ –∫–Ω–æ–ø–∫—É –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞
   - –ì–æ–≤–æ—Ä–∏—Ç–µ
   - –û—Ç–ø—É—Å—Ç–∏—Ç–µ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏

4. **–í–∏–¥–µ–æ–∑–≤–æ–Ω–∫–∏:**
   - –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –≤–∏–¥–µ–æ–∑–≤–æ–Ω–∫–∞ –≤ —á–∞—Ç–µ
   - –î–æ–∂–¥–∏—Ç–µ—Å—å –æ—Ç–≤–µ—Ç–∞ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞

5. **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ:**
   - –í–∫–ª—é—á–∏—Ç–µ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å "–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ" –≤ —á–∞—Ç–µ
   - –°–æ–æ–±—â–µ–Ω–∏—è –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —à–∏—Ñ—Ä–æ–≤–∞—Ç—å—Å—è

---

## üéâ –ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ!

–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã. –ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!
