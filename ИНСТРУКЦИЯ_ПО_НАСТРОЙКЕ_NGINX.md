# ‚úÖ –ù–ê–°–¢–†–û–ô–ö–ê NGINX - –ì–û–¢–û–í–û!

## üéâ –§–ê–ô–õ –°–û–ó–î–ê–ù!

–§–∞–π–ª `.nginx.conf` —É–∂–µ —Å–æ–∑–¥–∞–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤ –∫–æ—Ä–Ω–µ —Å–∞–π—Ç–∞:
- –ü—É—Ç—å: `~/parser-auto.site-access.ru/.nginx.conf`
- –°–æ–¥–µ—Ä–∂–∏—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è API –∏ WebSocket

---

## ‚è∞ –ß–¢–û –î–ï–õ–ê–¢–¨ –î–ê–õ–¨–®–ï

### 1. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 1-2 –º–∏–Ω—É—Ç—ã

Nginx –Ω–∞ Beget –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç —Ñ–∞–π–ª `.nginx.conf` –∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é. –û–±—ã—á–Ω–æ —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ 1-2 –º–∏–Ω—É—Ç.

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É API

–ß–µ—Ä–µ–∑ 1-2 –º–∏–Ω—É—Ç—ã –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
curl https://parser-auto.siteaccess.ru/api/health
```

**–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å:** `{"status":"ok"}`

–ï—Å–ª–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 404 –∏–ª–∏ –æ—à–∏–±–∫—É - –ø–æ–¥–æ–∂–¥–∏—Ç–µ –µ—â–µ –º–∏–Ω—É—Ç—É –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

–û—Ç–∫—Ä–æ–π—Ç–µ: `https://parser-auto.siteaccess.ru/`

–î–æ–ª–∂–Ω–∞ –æ—Ç–∫—Ä—ã—Ç—å—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ª–æ–≥–∏–Ω–∞.

### 4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è

1. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è"**
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É:
   - Email: `test@example.com`
   - Username: `testuser`
   - Password: `password123`
3. –ù–∞–∂–º–∏—Ç–µ **"–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è"**
4. –ü–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ–π–¥–µ—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É

---

## üîç –ï–°–õ–ò –ù–ï –†–ê–ë–û–¢–ê–ï–¢

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∞–π–ª –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
ssh dsc23ytp@5.101.156.207
cat ~/parser-auto.site-access.ru/.nginx.conf
```

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é.

### –í–∞—Ä–∏–∞–Ω—Ç 2: –û–±—Ä–∞—Ç–∏—Ç—å—Å—è –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É Beget

–ï—Å–ª–∏ —á–µ—Ä–µ–∑ 5-10 –º–∏–Ω—É—Ç API –≤—Å–µ –µ—â–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. –ó–∞–π–¥–∏—Ç–µ –≤ –ø–∞–Ω–µ–ª—å Beget: `https://cp.beget.com`
2. –û—Ç–∫—Ä–æ–π—Ç–µ —Ä–∞–∑–¥–µ–ª **"–ü–æ–¥–¥–µ—Ä–∂–∫–∞"** –∏–ª–∏ **"Support"**
3. –ù–∞–ø–∏—à–∏—Ç–µ –∑–∞–ø—Ä–æ—Å:

```
–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! 

–ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π Nginx –¥–ª—è –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è API.

–°–∞–π—Ç: parser-auto.siteaccess.ru
Backend —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞: http://localhost:3000

–ù—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ:
- /api ‚Üí http://localhost:3000
- /socket.io/ ‚Üí http://localhost:3000

–§–∞–π–ª .nginx.conf —É–∂–µ —Å–æ–∑–¥–∞–Ω –≤ –∫–æ—Ä–Ω–µ —Å–∞–π—Ç–∞, –Ω–æ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.

–ü–æ–º–æ–≥–∏—Ç–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å.
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–¥–¥–æ–º–µ–Ω –¥–ª—è API

–ï—Å–ª–∏ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ `/api` –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –ø–æ–¥–¥–æ–º–µ–Ω:

1. –í –ø–∞–Ω–µ–ª–∏ Beget —Å–æ–∑–¥–∞–π—Ç–µ –ø–æ–¥–¥–æ–º–µ–Ω: `api.parser-auto.siteaccess.ru`
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –µ–≥–æ –Ω–∞ –ø–æ—Ä—Ç 3000
3. –û–±–Ω–æ–≤–∏—Ç–µ `VITE_API_URL` –≤–æ Frontend –Ω–∞ `https://api.parser-auto.siteaccess.ru`

---

## üìã –°–û–î–ï–†–ñ–ò–ú–û–ï –§–ê–ô–õ–ê .nginx.conf

–§–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç:

```nginx
# Backend API
location /api {
    proxy_pass http://localhost:3000;
    proxy_http_version 1.1;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
}

# WebSocket
location /socket.io/ {
    proxy_pass http://localhost:3000;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";
    proxy_set_header Host $host;
}

# –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤
location /uploads/ {
    alias /home/dsc23ytp/messager/backend/uploads/;
    expires 1y;
    add_header Cache-Control "public";
}
```

---

## ‚úÖ –ì–û–¢–û–í–û!

**–§–∞–π–ª `.nginx.conf` —Å–æ–∑–¥–∞–Ω!** 

–ü–æ–¥–æ–∂–¥–∏—Ç–µ 1-2 –º–∏–Ω—É—Ç—ã –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É API. –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É Beget.

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
curl https://parser-auto.siteaccess.ru/api/health
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å: `{"status":"ok"}`
