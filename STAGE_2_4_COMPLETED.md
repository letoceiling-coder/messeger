# –≠—Ç–∞–ø—ã 2 –∏ 4 ‚Äî –í—ã–ø–æ–ª–Ω–µ–Ω—ã ‚úÖ

–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è: 2026-01-30

---

## ‚úÖ –≠—Ç–∞–ø 2: –ó–∞–ø–∏—Å—å –∞—É–¥–∏–æ

### 2.1 –£–¥–µ—Ä–∂–∞–Ω–∏–µ –¥–ª—è –∑–∞–ø–∏—Å–∏
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ (—É–∂–µ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)

- `onPointerDown` ‚Üí –Ω–∞—á–∞–ª–æ –∑–∞–ø–∏—Å–∏
- `onPointerUp` ‚Üí –æ–∫–æ–Ω—á–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏
- `onPointerLeave` ‚Üí –æ–∫–æ–Ω—á–∞–Ω–∏–µ –ø—Ä–∏ —É—Ö–æ–¥–µ –∫—É—Ä—Å–æ—Ä–∞
- `setPointerCapture` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –¥–≤–∏–∂–µ–Ω–∏—è

**–§–∞–π–ª—ã:**
- `frontend-web/src/components/VoiceRecorder.tsx`

---

### 2.2 –û—Ç–º–µ–Ω–∞ —Å–≤–∞–π–ø–æ–º
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ (—É–∂–µ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)

- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è (`onPointerMove`)
- –ü–æ—Ä–æ–≥ –æ—Ç–º–µ–Ω—ã: 80px (`SWIPE_CANCEL_THRESHOLD`)
- –ü—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ø–æ—Ä–æ–≥–∞ ‚Äî –æ—Ç–º–µ–Ω–∞ –∑–∞–ø–∏—Å–∏ –±–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è

**–§–∞–π–ª—ã:**
- `frontend-web/src/components/VoiceRecorder.tsx`

---

### 2.3 –í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –£–ª—É—á—à–µ–Ω–æ

#### –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:
1. **–ü—É–ª—å—Å–∏—Ä—É—é—â–∏–µ –≤–æ–ª–Ω—ã:**
   - –¢—Ä–∏ –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∏—á–µ—Å–∫–∏—Ö –∫—Ä—É–≥–∞ —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π `animate-ping` –∏ `animate-pulse`
   - –ö—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç –¥–ª—è –∏–Ω–¥–∏–∫–∞—Ü–∏–∏ –∑–∞–ø–∏—Å–∏
   
2. **–¢–∞–π–º–µ—Ä –∑–∞–ø–∏—Å–∏:**
   - –ö—Ä–∞—Å–∏–≤—ã–π –¥–∏–∑–∞–π–Ω —Å —Ç–æ–∫–µ–Ω–∞–º–∏ `app-error`
   - –§–æ—Ä–º–∞—Ç MM:SS
   
3. **–ü–æ–¥—Å–∫–∞–∑–∫–∞ –æ —Å–≤–∞–π–ø–µ:**
   - –¢–µ–∫—Å—Ç "‚Üê –°–≤–∞–π–ø –¥–ª—è –æ—Ç–º–µ–Ω—ã" —Ä—è–¥–æ–º —Å —Ç–∞–π–º–µ—Ä–æ–º
   
4. **–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —Å–≤–∞–π–ø–∞:**
   - –ö—Ä–∞—Å–Ω–∞—è –ø–æ–ª–æ—Å–∞ –≤–Ω–∏–∑—É –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å —Å–≤–∞–π–ø–∞ (0-100%)
   - –ü–æ—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏ –ø–∞–ª—å—Ü–∞/–º—ã—à–∏
   
5. **Toast –≤–º–µ—Å—Ç–æ alert:**
   - –£—Å–ø–µ—Ö: "–ì–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ"
   - –û—à–∏–±–∫–∞: –æ–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏
   
6. **–¢–æ–∫–µ–Ω—ã —Ü–≤–µ—Ç–æ–≤:**
   - –í—Å–µ —Å—Ç–∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –Ω–∞ `app-*` —Ç–æ–∫–µ–Ω—ã
   - –ö–Ω–æ–ø–∫–∞ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ —Å `active:scale-95`

**–§–∞–π–ª—ã:**
- `frontend-web/src/components/VoiceRecorder.tsx`

---

## ‚úÖ –≠—Ç–∞–ø 4: –≠–º–æ–¥–∑–∏ –∏ —Å—Ç–∏–∫–µ—Ä—ã

### 4.1 –ü–∞–Ω–µ–ª—å —ç–º–æ–¥–∑–∏ —Å —Å–µ—Ç–∫–æ–π
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

- –ü–∞–Ω–µ–ª—å 320px —Å 8 –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ —ç–º–æ–¥–∑–∏
- –°–µ—Ç–∫–∞ 8 —Å—Ç–æ–ª–±—Ü–æ–≤
- –¢–æ–∫–µ–Ω—ã —Ü–≤–µ—Ç–æ–≤ (`app-surface`, `app-border`, `app-accent`)
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≤—ã—Å–æ—Ç–∞ 240px —Å –ø—Ä–æ–∫—Ä—É—Ç–∫–æ–π
- –¢–µ–Ω—å –∏ —Å–∫—Ä—É–≥–ª–µ–Ω–∏–µ –¥–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –≤–∏–¥–∞

**–§–∞–π–ª—ã:**
- `frontend-web/src/components/EmojiPicker.tsx`

---

### 4.2 –í—Å—Ç–∞–≤–∫–∞ –≤ textarea
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

- –í—Å—Ç–∞–≤–∫–∞ —ç–º–æ–¥–∑–∏ –≤ –ø–æ–∑–∏—Ü–∏—é –∫—É—Ä—Å–æ—Ä–∞ (–Ω–µ –≤ –∫–æ–Ω–µ—Ü!)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `selectionStart`/`selectionEnd`
- –ê–≤—Ç–æ—Ñ–æ–∫—É—Å –Ω–∞ textarea –ø–æ—Å–ª–µ –≤—Å—Ç–∞–≤–∫–∏
- –ö—É—Ä—Å–æ—Ä —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –≤—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–≥–æ —ç–º–æ–¥–∑–∏
- Fallback: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ–Ω–µ—Ü, –µ—Å–ª–∏ textarea –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞

**–§–∞–π–ª—ã:**
- `frontend-web/src/pages/ChatPage.tsx`
- `frontend-web/src/components/MessageInputBar.tsx`

---

### 4.3 –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —ç–º–æ–¥–∑–∏
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

#### 8 –∫–∞—Ç–µ–≥–æ—Ä–∏–π:
1. **üòä –°–º–∞–π–ª–∏–∫–∏** ‚Äî 26 —ç–º–æ–¥–∑–∏
2. **üíî –≠–º–æ—Ü–∏–∏** ‚Äî 26 —ç–º–æ–¥–∑–∏
3. **üëã –ñ–µ—Å—Ç—ã** ‚Äî 24 —ç–º–æ–¥–∑–∏
4. **‚ù§Ô∏è –°–µ—Ä–¥—Ü–∞** ‚Äî 20 —ç–º–æ–¥–∑–∏
5. **‚ú® –°–∏–º–≤–æ–ª—ã** ‚Äî 24 —ç–º–æ–¥–∑–∏
6. **üê∂ –ñ–∏–≤–æ—Ç–Ω—ã–µ** ‚Äî 24 —ç–º–æ–¥–∑–∏
7. **üçï –ï–¥–∞** ‚Äî 24 —ç–º–æ–¥–∑–∏
8. **‚öΩ –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å** ‚Äî 24 —ç–º–æ–¥–∑–∏

**–í—Å–µ–≥–æ:** 192 —ç–º–æ–¥–∑–∏ (–≤–º–µ—Å—Ç–æ 80 –≤ —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏)

#### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏
- –ê–∫—Ç–∏–≤–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è –ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ—Ç—Å—è (`bg-app-accent`)
- –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- –ü–µ—Ä–≤—ã–π —ç–º–æ–¥–∑–∏ –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ ‚Äî –∏–∫–æ–Ω–∫–∞ –∫–Ω–æ–ø–∫–∏

**–§–∞–π–ª—ã:**
- `frontend-web/src/components/EmojiPicker.tsx`

---

## –ò—Ç–æ–≥–∏ —ç—Ç–∞–ø–æ–≤ 2 –∏ 4

### –ß—Ç–æ –ø–æ–ª—É—á–∏–ª–æ—Å—å:

#### –ó–∞–ø–∏—Å—å –∞—É–¥–∏–æ (–≠—Ç–∞–ø 2):
- ‚úÖ –£–¥–µ—Ä–∂–∞–Ω–∏–µ –¥–ª—è –∑–∞–ø–∏—Å–∏ ‚Äî –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ
- ‚úÖ –°–≤–∞–π–ø –¥–ª—è –æ—Ç–º–µ–Ω—ã ‚Äî –±—ã—Å—Ç—Ä–æ –∏ —É–¥–æ–±–Ω–æ
- ‚úÖ –í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å ‚Äî –∫—Ä–∞—Å–∏–≤–æ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ
- ‚úÖ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ ‚Äî –≤–∏–¥–Ω–æ, –∫–æ–≥–¥–∞ –æ—Ç–º–µ–Ω–∏—Ç—Å—è
- ‚úÖ Toast-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å

#### –≠–º–æ–¥–∑–∏ (–≠—Ç–∞–ø 4):
- ‚úÖ 192 —ç–º–æ–¥–∑–∏ –≤ 8 –∫–∞—Ç–µ–≥–æ—Ä–∏—è—Ö
- ‚úÖ –í—Å—Ç–∞–≤–∫–∞ –≤ –ø–æ–∑–∏—Ü–∏—é –∫—É—Ä—Å–æ—Ä–∞
- ‚úÖ –ö—Ä–∞—Å–∏–≤—ã–π –¥–∏–∑–∞–π–Ω —Å —Ç–æ–∫–µ–Ω–∞–º–∏
- ‚úÖ –£–¥–æ–±–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π

### –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:

**Frontend:**
- `src/components/VoiceRecorder.tsx` ‚Äî –≤–∏–∑—É–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
- `src/components/EmojiPicker.tsx` ‚Äî –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ –¥–∏–∑–∞–π–Ω
- `src/components/MessageInputBar.tsx` ‚Äî –ø–æ–¥–¥–µ—Ä–∂–∫–∞ textareaRef
- `src/pages/ChatPage.tsx` ‚Äî –≤—Å—Ç–∞–≤–∫–∞ —ç–º–æ–¥–∑–∏ –≤ –∫—É—Ä—Å–æ—Ä

---

## –°–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø: –≠—Ç–∞–ø 3+8 ‚Äî –§–æ—Ç–æ/–í–∏–¥–µ–æ

**–ó–∞–¥–∞—á–∏:**
- Backend: –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ –≤–∏–¥–µ–æ
- Frontend: –≤—ã–±–æ—Ä —Ñ–∞–π–ª–æ–≤ (–≥–∞–ª–µ—Ä–µ—è/–∫–∞–º–µ—Ä–∞)
- –ü—Ä–µ–≤—å—é –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–∏–Ω–∏–∞—Ç—é—Ä –≤ —á–∞—Ç–µ
- –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** –≠—Ç–∞–ø 1 (—É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω)

---

**–°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞:** –≠—Ç–∞–ø—ã 0, 1, 2, 4 –≤—ã–ø–æ–ª–Ω–µ–Ω—ã ‚úÖ  
**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –≠—Ç–∞–ø 3+8 (–§–æ—Ç–æ/–í–∏–¥–µ–æ)
