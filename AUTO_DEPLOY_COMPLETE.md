# ‚úÖ –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò–ô –î–ï–ü–õ–û–ô –ù–ê–°–¢–†–û–ï–ù (31.01.2026 20:25)

## üöÄ –ö–ê–ö –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨:

### –û–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è:

```powershell
.\scripts\auto-deploy.ps1 "–í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–æ–º–º–∏—Ç–∞"
```

–ò–ª–∏ –±–µ–∑ —Å–æ–æ–±—â–µ–Ω–∏—è (–±—É–¥–µ—Ç "Auto deploy"):
```powershell
.\scripts\auto-deploy.ps1
```

---

## ‚úÖ –ß–¢–û –ò–°–ü–†–ê–í–õ–ï–ù–û:

### 1. **PM2 –ø–µ—Ä–µ–∫–ª—é—á—ë–Ω –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é**:
- **–ë—ã–ª–æ**: `/var/www/messenger` (—Å—Ç–∞—Ä—ã–π –∫–æ–¥, –Ω–µ git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π)
- **–°—Ç–∞–ª–æ**: `/var/www/messager` (–∞–∫—Ç—É–∞–ª—å–Ω—ã–π git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π)

### 2. **–°–æ–∑–¥–∞–Ω `.env` —Ñ–∞–π–ª**:
```env
DATABASE_URL="mysql://messenger_user:Messenger2026!@localhost:3306/messenger_prod"
JWT_SECRET="MESSENGER_SUPER_SECRET_KEY_2026_PRODUCTION"
JWT_EXPIRES_IN=7d
PORT=3001
NODE_ENV=production
CORS_ORIGIN=*
UPLOAD_PATH=../uploads
MAX_FILE_SIZE=52428800
```

### 3. **–°–æ–∑–¥–∞–Ω—ã uploads –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏**:
```
/var/www/messager/backend/uploads/
‚îú‚îÄ‚îÄ images/    (777)
‚îú‚îÄ‚îÄ audio/     (777)
‚îú‚îÄ‚îÄ videos/    (777)
‚îî‚îÄ‚îÄ documents/ (777)
```

### 4. **Backend –∑–∞–ø—É—â–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç**:
```
Application is running on: http://localhost:3001
Environment: production
Status: online
```

---

## üì¶ –ß–¢–û –î–ï–õ–ê–ï–¢ –ê–í–¢–û–î–ï–ü–õ–û–ô –°–ö–†–ò–ü–¢:

### –õ–æ–∫–∞–ª—å–Ω–æ (PowerShell):
1. ‚úÖ `git add .`
2. ‚úÖ `git commit -m "—Å–æ–æ–±—â–µ–Ω–∏–µ"`
3. ‚úÖ `git push origin main`

### –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ (—á–µ—Ä–µ–∑ SSH):
1. ‚úÖ `cd /var/www/messager`
2. ‚úÖ `git fetch origin`
3. ‚úÖ `git reset --hard origin/main`
4. ‚úÖ –ö–æ–º–ø–∏–ª—è—Ü–∏—è –∏–∑–º–µ–Ω—ë–Ω–Ω—ã—Ö TypeScript —Ñ–∞–π–ª–æ–≤
5. ‚úÖ –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ä–∞–±–æ—á—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é PM2
6. ‚úÖ `npx vite build` (frontend)
7. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ uploads –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
8. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏–º–ª–∏–Ω–∫–æ–≤
9. ‚úÖ `pm2 restart messenger-api`
10. ‚úÖ `sudo systemctl reload nginx`
11. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
12. ‚úÖ –í—ã–≤–æ–¥ –æ—Ç—á—ë—Ç–∞

---

## üéØ –ü–†–û–í–ï–†–ö–ê –†–ê–ë–û–¢–´:

### 1. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–∞–π–ª—ã:
1. –û—Ç–∫—Ä–æ–π—Ç–µ https://neekloai.ru
2. **–û—á–∏—Å—Ç–∏—Ç–µ –∫–µ—à**: `Ctrl + F5` –∏–ª–∏ –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ:
   - üé§ –ì–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
   - üì∑ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
   - üé• –í–∏–¥–µ–æ

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ñ–∞–π–ª —Å–æ—Ö—Ä–∞–Ω–∏–ª—Å—è:
```bash
ssh root@89.169.39.244 "ls -la /var/www/messager/backend/uploads/images/"
```

–î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã:
```
-rw-r--r-- 1 root root 12345 Jan 31 20:25 img-*.jpg
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
```bash
ssh root@89.169.39.244 "pm2 logs messenger-api --lines 20"
```

–î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
```
POST /api/messages/upload-image 200
POST /api/messages/upload-audio 200
```

---

## üîß –ï–°–õ–ò –ß–¢–û-–¢–û –ù–ï –†–ê–ë–û–¢–ê–ï–¢:

### –ü—Ä–æ–±–ª–µ–º–∞: Backend –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–ü—Ä–æ–≤–µ—Ä–∫–∞**:
```bash
ssh root@89.169.39.244 "pm2 list"
```

**–ï—Å–ª–∏ status: errored**:
```bash
ssh root@89.169.39.244 "pm2 logs messenger-api --lines 50"
```

**–†–µ—à–µ–Ω–∏–µ**:
```bash
ssh root@89.169.39.244 "pm2 delete messenger-api && cd /var/www/messager/backend && pm2 start dist/src/main.js --name messenger-api && pm2 save"
```

### –ü—Ä–æ–±–ª–µ–º–∞: –§–∞–π–ª—ã –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤**:
```bash
ssh root@89.169.39.244 "ls -la /var/www/messager/backend/uploads/"
```

**–†–µ—à–µ–Ω–∏–µ**:
```bash
ssh root@89.169.39.244 "chmod -R 777 /var/www/messager/backend/uploads"
```

### –ü—Ä–æ–±–ª–µ–º–∞: 404 –Ω–∞ —Ñ–∞–π–ª—ã —á–µ—Ä–µ–∑ Nginx

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–º–ª–∏–Ω–∫–∞**:
```bash
ssh root@89.169.39.244 "ls -la /var/www/messager/backend/uploads/images/"
```

**–†–µ—à–µ–Ω–∏–µ**:
```bash
ssh root@89.169.39.244 "sudo systemctl reload nginx"
```

---

## üìä –°–¢–ê–¢–£–° –ü–†–û–ï–ö–¢–ê:

### ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç:
- Backend –∑–∞–ø—É—â–µ–Ω –∏–∑ `/var/www/messager`
- PM2 —Å—Ç–∞–±–∏–ª–µ–Ω (–Ω–µ –ø–∞–¥–∞–µ—Ç)
- .env –∑–∞–≥—Ä—É–∂–µ–Ω
- Uploads –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å–æ–∑–¥–∞–Ω—ã —Å –ø—Ä–∞–≤–∞–º–∏ 777
- Nginx –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ê–≤—Ç–æ–¥–µ–ø–ª–æ–π —Å–∫—Ä–∏–ø—Ç –≥–æ—Ç–æ–≤

### ‚ö†Ô∏è –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:
- –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ (–æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª)
- 404 –æ—à–∏–±–∫–∏ –¥–æ–ª–∂–Ω—ã –∏—Å—á–µ–∑–Ω—É—Ç—å
- –°–æ–æ–±—â–µ–Ω–∏—è –Ω–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø—É—Å—Ç—ã–º–∏

---

## üöÄ –ü–û–ü–†–û–ë–£–ô–¢–ï –°–ï–ô–ß–ê–°:

1. **–û—á–∏—Å—Ç–∏—Ç–µ –∫–µ—à –±—Ä–∞—É–∑–µ—Ä–∞**:
   - –ü–ö: `Ctrl + Shift + N` (–∏–Ω–∫–æ–≥–Ω–∏—Ç–æ) –∏–ª–∏ `F12` ‚Üí Clear site data ‚Üí `Ctrl + F5`
   - –¢–µ–ª–µ—Ñ–æ–Ω: –û—á–∏—Å—Ç–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Å–∞–π—Ç–∞

2. **–û—Ç–∫—Ä–æ–π—Ç–µ**: https://neekloai.ru

3. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ –ª—é–±–æ–π —Ñ–∞–π–ª** (–≥–æ–ª–æ—Å–æ–≤–æ–µ, —Ñ–æ—Ç–æ, –≤–∏–¥–µ–æ)

4. **–°–æ–æ–±—â–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
   - ‚úÖ –§–∞–π–ª –æ—Ç–ø—Ä–∞–≤–∏–ª—Å—è –∏ –≤–∏–¥–µ–Ω –≤ —á–∞—Ç–µ?
   - ‚ùå –í—Å—ë –µ—â—ë 404 –æ—à–∏–±–∫–∞?
   - DevTools (F12) ‚Üí Network ‚Üí –∫–∞–∫–æ–π —Å—Ç–∞—Ç—É—Å –∫–æ–¥?

---

## üìù –ü–†–ò–ú–ï–† –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø –ê–í–¢–û–î–ï–ü–õ–û–Ø:

```powershell
# –í –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:
cd "C:\OSPanel\domains\Messager"

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –¥–µ–ø–ª–æ–π:
.\scripts\auto-deploy.ps1 "–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤"

# –†–µ–∑—É–ª—å—Ç–∞—Ç:
# ‚úÖ Git: commit + push
# ‚úÖ –°–µ—Ä–≤–µ—Ä: pull + build + restart
# ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞: –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç
# ‚úÖ –û—Ç—á—ë—Ç: –ø–æ–∫–∞–∑–∞–Ω —Å—Ç–∞—Ç—É—Å

# –í—Å—ë –≥–æ—Ç–æ–≤–æ! üéâ
```

---

**üéØ –ü–û–ü–†–û–ë–£–ô–¢–ï –û–¢–ü–†–ê–í–ò–¢–¨ –§–ê–ô–õ –ò –°–û–û–ë–©–ò–¢–ï –†–ï–ó–£–õ–¨–¢–ê–¢!**
