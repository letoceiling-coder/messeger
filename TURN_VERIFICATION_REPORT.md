# ‚úÖ –û–¢–ß–Å–¢ –û –ü–†–û–í–ï–†–ö–ï TURN –°–ï–†–í–ï–†–ê (31.01.2026 13:40 MSK)

## üéØ –†–ï–ó–£–õ–¨–¢–ê–¢: TURN –°–ï–†–í–ï–† –†–ê–ë–û–¢–ê–ï–¢ –û–¢–õ–ò–ß–ù–û! ‚úÖ

---

## üìä –°—Ç–∞—Ç—É—Å —Å–ª—É–∂–±—ã

### coturn service
```
Status: ‚úÖ active (running)
Uptime: 1 –¥–µ–Ω—å 6+ —á–∞—Å–æ–≤ (–∑–∞–ø—É—â–µ–Ω 30.01.2026 07:30:31 UTC)
PID: 77681 (–ø–æ—Å–ª–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞)
Memory: 6.5M
CPU: 51ms
```

### –ü–æ—Ä—Ç—ã
```
‚úÖ UDP 3478: –°–õ–£–®–ê–ï–¢ (2 —Å–æ–∫–µ—Ç–∞)
‚úÖ TCP 3478: –°–õ–£–®–ê–ï–¢ (2 —Å–æ–∫–µ—Ç–∞)
‚úÖ –ü—Ä–æ—Ü–µ—Å—Å: /usr/bin/turnserver (PID 77681)
```

### –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–Ω–∞—Ä—É–∂–∏
```
‚úÖ TCP –ø–æ—Ä—Ç 3478: Connection succeeded!
‚úÖ –°–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
```

---

## üîç –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤

### –ù–∞–π–¥–µ–Ω–æ –≤ –ª–æ–≥–∞—Ö (journalctl):

#### ‚úÖ –ê–ö–¢–ò–í–ù–´–ï –°–ï–°–°–ò–ò –° –ê–£–¢–ï–ù–¢–ò–§–ò–ö–ê–¶–ò–ï–ô
```
username=<turn_fdf8b6e8> - –ù–ê–® –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨!
realm=<neekloai.ru>
```

#### ‚úÖ –†–ï–ê–õ–¨–ù–´–ï –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–Ø –ö–õ–ò–ï–ù–¢–û–í
–û–±–Ω–∞—Ä—É–∂–µ–Ω—ã peer-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (—Ä–µ–∞–ª—å–Ω—ã–µ –∑–≤–æ–Ω–∫–∏):
- `peer 109.234.26.245` ‚úÖ
- `peer 192.168.0.198` ‚úÖ  
- `peer 45.137.112.113` ‚úÖ

#### ‚úÖ –ü–ï–†–ï–î–ê–ß–ê –î–ê–ù–ù–´–•
```
session 000000000000000433:
  received: rp=255, rb=33516 (33 KB –ø—Ä–∏–Ω—è—Ç–æ)
  sent: sp=14, sb=1140 (1.1 KB –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ)
  peer sent: sp=240, sb=24000 (24 KB –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ)
```

**–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —á–µ—Ä–µ–∑ TURN –ø—Ä–æ—Ö–æ–¥–∏–ª —Ä–µ–∞–ª—å–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫!**

---

## üìã –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### /etc/turnserver.conf
```ini
listening-ip=0.0.0.0
relay-ip=0.0.0.0
listening-port=3478
tls-listening-port=5349
external-ip=89.169.39.244      ‚úÖ –°–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Ä–µ–∞–ª—å–Ω—ã–º IP
realm=neekloai.ru
lt-cred-mech
user=turn_fdf8b6e8:U1cM4fhoxxqTnbb8XE9n
log-file=/var/log/turnserver/turnserver.log
verbose
```

### frontend-web/.env.production
```env
VITE_TURN_USER=turn_fdf8b6e8              ‚úÖ
VITE_TURN_CREDENTIAL=U1cM4fhoxxqTnbb8XE9n ‚úÖ
VITE_TURN_SERVER=89.169.39.244            ‚úÖ
```

**‚úÖ –í–°–Å –°–û–í–ü–ê–î–ê–ï–¢!**

---

## üéØ –î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ —Ä–∞–±–æ—Ç—ã

### 1. –°–µ—Å—Å–∏–∏ —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π ‚úÖ
```
user <turn_fdf8b6e8>: incoming packet REFRESH processed, success
```
–ö–ª–∏–µ–Ω—Ç—ã —É—Å–ø–µ—à–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑—É—é—Ç—Å—è —Å –Ω–∞—à–∏–º–∏ —É—á—ë—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏!

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –∞–ª–ª–æ–∫–∞—Ü–∏–π ‚úÖ
```
session ... realm=<neekloai.ru>, username=<turn_fdf8b6e8>
```
TURN –≤—ã–¥–µ–ª—è–µ—Ç —Ä–µ—Å—É—Ä—Å—ã –¥–ª—è relay —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π.

### 3. Peer —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è ‚úÖ
```
peer 109.234.26.245 deleted
peer 192.168.0.198 deleted
```
–†–µ–∞–ª—å–Ω—ã–µ peer-to-peer —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —á–µ—Ä–µ–∑ TURN relay!

### 4. –ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö ‚úÖ
```
rp=255, rb=33516, sp=14, sb=1140
peer: sp=240, sb=24000
```
–ß–µ—Ä–µ–∑ —Å–µ—Ä–≤–µ—Ä –ø—Ä–æ—à–ª–æ **33 KB –≤—Ö–æ–¥—è—â–∏—Ö** –∏ **24 KB –∏—Å—Ö–æ–¥—è—â–∏—Ö** –¥–∞–Ω–Ω—ã—Ö!

---

## üìà –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

### –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ IP –∞–¥—Ä–µ—Å–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤:
- `45.137.112.113:54474` - —É—Å–ø–µ—à–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª TURN
- `109.234.26.245:50281` - –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–µ—Å—Å–∏–∏
- `192.168.0.198` - peer —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
- `92.100.255.60` - TCP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- `47.254.233.150` - –∞–∫—Ç–∏–≤–Ω–∞—è —Å–µ—Å—Å–∏—è
- `148.153.56.170` - –∞–∫—Ç–∏–≤–Ω–∞—è —Å–µ—Å—Å–∏—è

### –¢–∏–ø—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π:
- ‚úÖ UDP relay (–æ—Å–Ω–æ–≤–Ω–æ–π —Ç—Ä–∞—Ñ–∏–∫)
- ‚úÖ TCP relay (–¥–ª—è —Å—Ç—Ä–æ–≥–∏—Ö NAT)
- ‚úÖ Peer allocations (relay –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç–∞–º–∏)

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è ‚úÖ
```
user <turn_fdf8b6e8> - –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Å–µ—Å—Å–∏–∏
user <> - –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ (–æ—Ç–∫–ª–æ–Ω–µ–Ω—ã)
```

–°–µ—Ä–≤–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ç–∫–ª–æ–Ω—è–µ—Ç –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã!

### –¢–∞–π–º–∞—É—Ç—ã ‚úÖ
```
reason: allocation timeout
reason: allocation watchdog determined stale session state
```

–°–µ—Ä–≤–µ—Ä –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏.

---

## üìÅ –§–∞–π–ª—ã –ª–æ–≥–æ–≤

### –°–æ–∑–¥–∞–Ω—ã:
```
/var/log/turnserver/turnserver_2026-01-30.log (799 KB)
/var/log/turnserver/turnserver_2026-01-31.log (4.2 KB)
```

### –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è:
```
drwxr-xr-x  2 turnserver turnserver
‚úÖ –ü—Ä–∞–≤–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
```

---

## ‚úÖ –ò–¢–û–ì–û–í–ê–Ø –û–¶–ï–ù–ö–ê

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|----------|--------|-------------|
| –°–ª—É–∂–±–∞ coturn | ‚úÖ | –†–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ 1+ –¥–µ–Ω—å |
| –ü–æ—Ä—Ç 3478 UDP | ‚úÖ | –°–ª—É—à–∞–µ—Ç, –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑–≤–Ω–µ |
| –ü–æ—Ä—Ç 3478 TCP | ‚úÖ | –°–ª—É—à–∞–µ—Ç, –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑–≤–Ω–µ |
| –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è | ‚úÖ | –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞, —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º |
| –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è | ‚úÖ | –†–∞–±–æ—Ç–∞–µ—Ç (turn_fdf8b6e8) |
| –õ–æ–≥–∏ | ‚úÖ | –í–µ–¥—É—Ç—Å—è, –¥–æ—Å—Ç—É–ø–Ω—ã |
| –†–µ–∞–ª—å–Ω—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è | ‚úÖ | –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –≤ –ª–æ–≥–∞—Ö! |
| –ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö | ‚úÖ | ~33 KB –≤—Ö–æ–¥—è—â–∏—Ö, ~24 KB –∏—Å—Ö–æ–¥—è—â–∏—Ö |
| Peer relay | ‚úÖ | –ú–∏–Ω–∏–º—É–º 3 peer —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è |
| External IP | ‚úÖ | 89.169.39.244 (—Å–æ–≤–ø–∞–¥–∞–µ—Ç) |

---

## üéâ –í–´–í–û–î–´

### ‚úÖ –í–ê–® TURN –°–ï–†–í–ï–† –ü–û–õ–ù–û–°–¢–¨–Æ –†–ê–ë–û–ß–ò–ô!

**–î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞:**

1. **–°–ª—É–∂–±–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç** - –∞–∫—Ç–∏–≤–Ω–∞ 1+ –¥–µ–Ω—å –±–µ–∑ —Å–±–æ–µ–≤
2. **–ü–æ—Ä—Ç—ã –æ—Ç–∫—Ä—ã—Ç—ã** - –¥–æ—Å—Ç—É–ø–Ω—ã –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
3. **–ï—Å—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è** - –≤ –ª–æ–≥–∞—Ö –≤–∏–¥–Ω—ã —Å–µ—Å—Å–∏–∏ —Å –≤–∞—à–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
4. **–ü—Ä–æ—Ö–æ–¥–∏—Ç —Ç—Ä–∞—Ñ–∏–∫** - –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –ø–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö (>50 KB)
5. **Peer —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç** - –º–∏–Ω–∏–º—É–º 3 —É—Å–ø–µ—à–Ω—ã—Ö relay

### üéØ –ö—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –≤–∞—à TURN:

–°—É–¥—è –ø–æ –ª–æ–≥–∞–º, –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å—É—Ç–∫–∏ —á–µ—Ä–µ–∑ –≤–∞—à TURN –ø—Ä–æ—Ö–æ–¥–∏–ª–∏ —Ä–µ–∞–ª—å–Ω—ã–µ –∑–≤–æ–Ω–∫–∏:
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–µ—Å—Å–∏–∏ –æ—Ç IP `109.234.26.245`
- Peer —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å `192.168.0.198`
- –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –æ—Ç `45.137.112.113`

**–≠—Ç–æ –º–æ–≥–ª–∏ –±—ã—Ç—å –≤–∞—à–∏ —Ç–µ—Å—Ç–æ–≤—ã–µ –∑–≤–æ–Ω–∫–∏ –∏–ª–∏ –¥—Ä—É–≥–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏!**

---

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç! –ú–æ–∂–Ω–æ:

1. ‚úÖ **–ü—Ä–æ–¥–æ–ª–∂–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å** —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π TURN
2. ‚úÖ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–≤–æ–Ω–∫–∏** - —Å–µ—Ä–≤–µ—Ä –≥–æ—Ç–æ–≤
3. ‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –ª–æ–≥–∏** - –ø—Ä–∏ –∑–≤–æ–Ω–∫–µ —Å–º–æ—Ç—Ä–∏—Ç–µ:
   ```bash
   ssh root@89.169.39.244 "tail -f /var/log/turnserver/turnserver_2026-01-31.log"
   ```

### –ï—Å–ª–∏ –∑–∞—Ö–æ—Ç–∏—Ç–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å:

1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å rate limiting (–ø—Ä–æ—Ç–∏–≤ DDoS)
2. –î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Prometheus/Grafana
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ª–æ–≥—Ä–æ—Ç–µ–π—Ç –¥–ª—è –∞—Ä—Ö–∏–≤–∞—Ü–∏–∏ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤

---

## üìû –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### –°–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏:
```bash
ssh root@89.169.39.244 "tail -f /var/log/turnserver/turnserver_2026-01-31.log"
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–µ—Å—Å–∏–π:
```bash
ssh root@89.169.39.244 "grep 'turn_fdf8b6e8' /var/log/turnserver/turnserver_*.log | wc -l"
```

### –ê–∫—Ç–∏–≤–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è:
```bash
ssh root@89.169.39.244 "ss -tunp | grep 3478"
```

---

## üéä –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

# –í–ê–® TURN –°–ï–†–í–ï–† –†–ê–ë–û–¢–ê–ï–¢ –ò–î–ï–ê–õ–¨–ù–û! ‚úÖ

- **–°—Ç–∞—Ç—É—Å:** üü¢ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–µ–Ω
- **–¢—Ä–∞—Ñ–∏–∫:** ‚úÖ –†–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ö–æ–¥—è—Ç
- **–ö–ª–∏–µ–Ω—Ç—ã:** ‚úÖ –£—Å–ø–µ—à–Ω–æ –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:** ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞

**–ú–æ–∂–µ—Ç–µ —Å–º–µ–ª–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –≤–∏–¥–µ–æ–∑–≤–æ–Ω–∫–æ–≤!** üéâ

---

**–î–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:** 31.01.2026 13:40 MSK  
**–ü—Ä–æ–≤–µ—Ä–∏–ª:** AI Assistant  
**–ú–µ—Ç–æ–¥:** SSH + journalctl + –ª–æ–≥–∏ coturn
